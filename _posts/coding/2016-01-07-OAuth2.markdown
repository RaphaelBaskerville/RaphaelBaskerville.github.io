---
layout: post
title:  "How to retrieve any users last tweet using the Twitter API"
date:   2016-1-10 00:50:32 -0800
categories: coding
---

# Using Express to get tweets from any user.

## OAuth2 Application-only token.

  In order to make requests to Twitter you have to authenticate yourself.   In this example, instead of authenticating an actual user, we authenticate the application itself.

{% highlight ruby %}
//////////////////////////////////////////////////////////////////
//Set up and send a request for our application-only oAuth token.
///////////////////////////////////////////////////////////////////

// create a variable to hold our token.
var twitterAppToken;

// store our twitter key and secret
var consumerKey = 'xxxxxxxxxxxxxxx';
var consumerSecret = 'xxxxxxxxxxxxxxxxxx';

// concat the key and secret seperated by a colon.
var bearerTokenCred = consumerKey + ':' + consumerSecret;

// pass the key string into Buffer constructor to create a buffer obj.
var bufferedToken = new Buffer(bearerTokenCred);

// encode the buffer object in base64
var encodedAndBufferedToken = bufferedToken.toString('base64');
{% endhighlight %}
  
  You need to aquire the keys and secret for your app after you register it with twitter. 

{% highlight ruby %}

// set up options, you need quotes around keys with hyphens
var options = {
  url: 'https://api.twitter.com/oauth2/token',
  body: 'grant_type=client_credentials',
  method: 'POST',
  'Accept-Encoding': 'gzip',
  headers: {
    Authorization: 'Basic ' + encodedAndBufferedToken,
    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
  },
};

// request and save an application-only token from twitter
request(options, function (err, response, body) {
  if (err) {
    console.log(err);
  }

  twitterAppToken = JSON.parse(body);
});

app.listen(port);
{% endhighlight %}

[twitter-apps]: https://apps.twitter.com/

